<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<HTML>
<HEAD>


<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="description" content="MEL How-To">
<meta name="keywords" content="maya,mel,how-to">
<meta http-equiv="Content-Style-Type" content="text/css">

<LINK REL=STYLESHEET HREF="../ewertb.css" TYPE="text/css">

<TITLE>MEL How-To
#68</TITLE>

</HEAD>

<BODY><!-- {{ header }} --><div class="body">

<table cellspacing=0 cellpadding=0 width="100%"><tr><td class="title"><h1>MEL How-To #68</h1></td></tr>
<tr><td class="bar"><table cellspacing=0 cellpadding=0 width="100%"><tr><td class="php"><a href="mel.html">Back</a> &middot; <a href="mel.067.html">Previous</a> &middot; <a href="mel.069.html">Next</a></td><td> <!--<a href="../../">Home</a> &middot; --><a href="../../maya.html">Maya</a></td></tr></table></td></tr>

<tr><td class="body">

<h2 class="body">How do I specify the options for an Export plug-in (a.k.a. File Translator)?</h2>
<!-- How do I specify the options for an Export plug-in (a.k.a. File Translator)? -->

<P>The options string is generated by the MEL script that is defined as the
"Options" MEL script for the Export type.  The exact name of this file is
arbitrary and is specified within the exporter plug-in.</P>

<P>For example, the OBJ exporter uses "objExportOptions.mel" to display its
options for the user.  During an Export, Maya calls this script in two modes:
"post" and "query".  In "post" mode the "objExportOptions" script populates
the <SPAN CLASS="ui">"File Type Specific Options"</SPAN> layout of the <SPAN CLASS="ui">Export Options</SPAN> panel, setting
all UI elements to their current values (or defaults for the first time the
Exporter is run).  In "query" mode the script reads the settings for the
options set by the user and concatenates all options in the form:</P>

<PRE>
optionName1=value1;optionName2=value2;...
</PRE>

<P>To communicate the options between the Exporter and the options panel, Maya
saves them in an optionVar.  The name of this optionVar is defined within
"pv_performAction.mel" as "<SPAN CLASS="arg">&lt;exportType&gt;</SPAN>Options".  In the case of the OBJ
exporter, an optionVar with the name "OBJexportOptions" is created.  To
query the current state of the options:</P>

<PRE CLASS="mel">
optionVar -q OBJexportOptions;
// Result: groups=1;ptgroups=0;materials=0;smoothing=0;normals=0 //
</PRE>

<P>To build the 'file' command to perform an "<SPAN CLASS="ui">Export All</SPAN>" function:</P>

<PRE CLASS="mel">
file -typ <SPAN CLASS="arg">&lt;exportType&gt;</SPAN> -op <SPAN CLASS="arg">&lt;optionsString&gt;</SPAN> -ea $theFile;
</PRE>

<P>As a real-world example:</P>

<PRE CLASS="mel">
string $exportType = "OBJexport";
string $optionsString = `optionVar -q OBJexportOptions`;
string $theFile = "D:/AW/user/projects/foo.obj";

file -typ $exportType -op $optionsString -ea $theFile;
</PRE>

<P>For "Export Selected":</P>

<PRE CLASS="mel">
file -typ <SPAN CLASS="arg">&lt;exportType&gt;</SPAN> -op <SPAN CLASS="arg">&lt;optionsString&gt;</SPAN> -es $theFile;
</PRE>

<P>In my experience, the OBJexport file translator makes no distinction between
<SPAN CLASS="ui">Export All</SPAN> and <SPAN CLASS="ui">Export Selected</SPAN> -- it always assumes an
<SPAN CLASS="ui">Export All</SPAN>.  Of course, your in-house Exporters will be smarter than this,
right?</P>

<P>Armed with this information you are able to use the options as defined in the Exporter panel.  But
what if you want to define them yourself?</P>

<P>Firstly, you will need to know the names of all of the options.  Secondly,
you will need to know what values are valid for its corresponding
name.  These can be gleaned in one of two ways:</P>

<OL>
<LI><P>Echo the optionVar ($optionsString above) and pick out the name of each
option.  Some names may make their purpose obvious and you'll be able to
judge what their value means (on/off values, for instance).  Others may require some educated guessing.</P></LI>

<LI><P>Load up the MEL script responsible for generating these options (the
"Options" MEL script described above) and determine what option names are
used, their purpose, and their range of values.</P></LI>
</OL>

<P>The latter of these two will provide a more complete assessment of the
options and how each's corresponding value is derived.</P>

<div class="sidebar">
<P CLASS="sans"><b>MEL Tip</b></P>
<P CLASS="sans">To use the export type last used by the Export panel:</P>

<PRE CLASS="mel">
string $exportType = `optionVar -q defaultFileExportActiveType`;
</PRE>
</div>

<P CLASS="rcomment"><!-- DATE -->Tuesday, July 17, 2001</P>

</td></tr>

<tr><td class="footer">Copyright &copy;2005 by Bryan Ewert, <A HREF="mailto:maya@ewertb.com">maya@ewertb.com</A><BR>
<I>Maya</I> is a Registered Trademark of <A HREF="http://www.alias.com">Alias</A><br>
</td></tr>

</table>
</div>
<!-- {{ footer }} --></body>


</HTML>